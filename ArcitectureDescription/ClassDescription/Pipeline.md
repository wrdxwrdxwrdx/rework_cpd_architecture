## Pipeline

Основной класс фреймворка. Служит для создания полноценного эксперимента из различных шагов. Инициализирует базы данных и проверяет конфигурацию эксперимента.

+ ПОЛЯ:

  + steps: list[Steps]

    Упорядоченный набор шагов эксперимента

  + gen_data_storage: Optional[Storage] = None

    БД для хранения данных для эксперимента. Изначально None, после конфигурации, БД инициализируется с помощью метода **setup_db(gen_data_fields)**

  + result: Optional[Storage] = None

    БД для хранения результатов эксперимента. Изначально None, после конфигурации, БД инициализируется с помощью метода **setup_db(result_fields)**

  + gen_data_fields: set[str] = {}

    Поля в БД с данными для эксперимента. Заполняется постепенно, при конфигурации пайплайна. Нужен для проверки корректности конфигурации

  + result_fields: set[str] = {}

    Поля в БД с результатами эксперимента. Заполняется постепенно, при конфигурации пайплайна. Нужен для проверки корректности конфигурации

  + meta_data: dict[str, Any] = {} 

    Данные, передающиеся между шагами. Используется сначала для проверки конфигурации, после для передачи данных

  + gen_data_saver: Optional[Saver] = None

    Saver для БД данных для эксперимента

  + gen_data_loader: Optional[Loader] = None

    Loader для БД данных для эксперимента

  + result_saver: Optional[Saver] = None

    Saver для БД результатов эксперимента

  + result_loader: Optional[Loader] = None

    Loader для БД результатов эксперимента

+ МЕТОДЫ:

  + config_pipeline(): bool

    Конфигурирует и проверяет пайплайн.

    **КАК?** 

    1. Проходимся по всем шагам и добавляем input/output поля. Так же с ними сверяем следующие input/output значения (так же meta_data). При несоответствии кидаем ошибку с описанием того, чего не хватает.
    2. Если ошибки не обнаружено, то подключаем шаги с помощью set_next
    3. После проверки корректности конфигурации, у нас есть все нужные поля для инициализации обоих БД (метод **setup_db**).
    4. Создаем Saver Loader для каждой БД. И передаем их в шаги.

  + setup_db(fields: set[str]): Storage

    Инициализируем БД по нужным нам полям

  + run(): None

    Конфигурирует и запускает последовательно весь пайплайн.